{"version":3,"sources":["components/Table/Table.component.tsx","App.js","reportWebVitals.js","index.js"],"names":["TableContainer","styled","th","div","StyledTableRow","td","TableRow","props","headers","HorizontalDiv","TableExtension","useState","tableData","setTableData","col","setCol","useHeader","setHeader","useEffect","init","sdk","window","startAutoResizer","data","field","getValue","updateTableStateAndField","setValue","renderRow","row","rowIdx","map","item","cellIdx","name","id","labelText","value","aria-label","onChange","e","event","newTableData","target","updateCellData","textarea","className","length","isActive","onToggle","buttonType","size","onClick","table","additionalRow","Array","fill","push","pop","console","log","AppContainer","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.fd235ef9.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport {\n    Button,\n    TextField,\n    TableBody,\n    TableCell,\n    TableRow,\n    Table,\n    TableHead,\n    Heading,\n    ToggleButton,\n    Switch,\n    DisplayText,\n    Subheading\n} from '@contentful/forma-36-react-components';\nimport '@contentful/forma-36-react-components/dist/styles.css';\nimport styled from \"styled-components\";\nimport { init } from \"@contentful/app-sdk\";\n\nconst TableHeader = styled.th`\n    background-color: pink;\n`;\n\n// interface TableCellProps {\n//     useHeader: boolean;\n// }\n\n\n// max-width: ${window.innerWidth};\n// overflow-x: auto;\n// background-color: green;\n// padding: 1rem;\n\nconst TableContainer = styled.div`\n    width: 100%;\n    overflow-x: auto;\n    padding: 1rem;\n\n`;\n// .table---fixed {\n//     table-layout: auto;\n//     width: 100%;\n// }\n\nconst CustomTableCell = styled.td`\n    padding: 0rem;\n`;\n// TODO: Add dynamic header color based on state -- background-color: ${(props: TableCellProps) => props.useHeader ? \"#ffffff\" : \"#e2e2e2\"};\n\nconst StyledTableRow = styled(TableRow)`\n    background-color: ${(props: any) => props.headers === 'true' ? \"#e1e7eb\" : 'white'}\n`;\n\n\nconst HorizontalDiv = styled.div`\n    display: flex;\n    // margin: 1rem;\n    flex-direction: horizontal;\n    \n    > * {\n        margin: 0.25rem;\n    }\n`;\n\n// TODO: Import in form 36 fcss for more consistent styling\n\nconst TableExtension = (props: any) => {\n\n    /**\n     * Starts the entension window auto resizing and unpacks saved table data and metadata.\n     */\n    const initializeExtension = () => {\n        init((sdk: any) => {\n            sdk.window.startAutoResizer();\n            let data = sdk.field.getValue();\n            setTableData(data.tableData);\n            setHeader(data.useHeader);\n        });\n    }\n\n    // a set of rows.\n    const [tableData, setTableData] = useState<any[]>([]);\n    const [row, setRow] = useState<string[]>([]);\n    const [col, setCol] = useState<number>(0);\n    const [useHeader, setHeader] = useState(true);\n\n\n    useEffect(() => {\n        initializeExtension();\n    }, [])\n\n    const handleToggleHeader = () => {\n        setHeader(!useHeader);\n        updateTableStateAndField(tableData);\n    }\n\n\n    /** wrapper to ensure table changes synchronize with contentful field value changes. */\n    const updateTableStateAndField = (tableData: any[]) => {\n        // updating react component state\n        setTableData(tableData);\n\n        // // update the field value\n        init((sdk: any) => {\n            sdk.field.setValue({\n                useHeader,\n                tableData\n            });\n        })\n    }\n\n\n\n    /**\n     * Adds a row to the table with a size determined by the current column count.\n     */\n    const addRow = () => {\n        if (col <= 0) {\n            return;\n        }\n        let table: any[] = [...tableData];\n        let additionalRow = new Array(col).fill(null);\n        table.push(additionalRow);\n        updateTableStateAndField(table);\n    }\n\n    const addCol = () => {\n        console.log({ tableData });\n        setCol(col + 1);\n    }\n\n    /**\n     * reduces the column size for the next row to be created\n     */\n    const removeCol = () => {\n        if (col <= 0) {\n            return;\n        }\n        setCol(col - 1);\n    }\n\n    /**\n     * removes the end/bottom row of the table\n     */\n    const removeRow = () => {\n        if (tableData.length <= 0) {\n            return;\n        }\n        let newTableData = [...tableData];\n        newTableData.pop();\n        updateTableStateAndField(newTableData);\n    }\n\n    const renderTableRows = () => {\n        return tableData.map((row, rowIdx) => {\n            return <StyledTableRow headers={`${useHeader && rowIdx == 0}`} key={\"row\" + rowIdx}>\n                {renderRow(row, rowIdx)}\n            </StyledTableRow>\n        });\n    }\n\n    /**\n     * Updates the table data with values from a table cell.\n     */\n    const updateCellData = (event: any, rowIdx: number, cellIdx: number) => {\n        let newTableData = [...tableData]; // copy the object\n        newTableData[rowIdx][cellIdx] = event.target.value // update the singular cell entry\n        updateTableStateAndField(newTableData); // update the tableData state. (not sure if it's necessary?)\n    }\n\n\n    /**\n     * Creates a row within the table\n     * @param row A row which is an array of string values\n     * @param rowIdx The index of the row currently being created\n     */\n    const renderRow = (row: string[], rowIdx: number) => {\n        return row.map((item, cellIdx) => {\n            return <TableCell>\n                <TextField\n                    name={`table-cell-y${rowIdx}-x${cellIdx}`}\n                    id={`table-cell-y${rowIdx}-x${cellIdx}`}\n                    labelText={``}\n                    value={item}\n                    // helpText={`Input your text.`}\n                    // TODO: Implement better header visual indicator\n                    // helpText={rowIdx == 0  && useHeader ? 'Header' : ''}\n                    aria-label={`Input for row ${rowIdx}, cell ${cellIdx}`}\n                    onChange={e => updateCellData(e, rowIdx, cellIdx)}\n                    textarea\n                ></TextField>\n            </TableCell>\n        });\n    }\n\n    return (\n        // <TableContainer></TableContainer>\n        <>\n            <TableContainer>\n                <Table className=\"table---fixed\">\n                    <TableHead>\n                    </TableHead>\n                    <TableBody>\n                        {renderTableRows()}\n                    </TableBody>\n                </Table>\n            </TableContainer>\n            <Subheading>\n                Rows: {tableData.length} Columns: {col}\n            </Subheading>\n            <HorizontalDiv>\n                <ToggleButton isActive={useHeader} onToggle={handleToggleHeader}\n                >Headers</ToggleButton>\n            </HorizontalDiv>\n            <HorizontalDiv>\n                <Button buttonType=\"primary\" size=\"small\" onClick={addRow}>Add Row</Button>\n                <Button buttonType=\"primary\" size=\"small\" onClick={removeRow}>Remove Row</Button>\n            </HorizontalDiv>\n            <HorizontalDiv>\n                <Button buttonType=\"primary\" size=\"small\" onClick={addCol}>Add Column</Button>\n                <Button buttonType=\"primary\" size=\"small\" onClick={removeCol}>Remove Column</Button>\n            </HorizontalDiv>\n        </>\n    )\n}\n\nexport default TableExtension;\n\n// build the html for the rows, create the data on save? Data should be a variable as it's to re-render the page.","import './App.css';\nimport TableExtension from \"./components/Table/Table.component\";\nimport styled from 'styled-components';\n\nconst AppContainer = styled.div`\n  overflow: hidden;\n  border-radius: 10px;\n`;\n\n\nfunction App() {\n    return (\n      <AppContainer className=\"App\">\n        <header className=\"App-header\">\n          <TableExtension></TableExtension>\n        </header>\n      </AppContainer>\n    );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}